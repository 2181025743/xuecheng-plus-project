# ⚠️ 配置说明 - 重要

## 🔐 敏感信息配置

为了安全考虑，项目中的敏感信息已使用占位符替换。**在实际使用前，请务必配置真实的值**。

---

## 📝 需要配置的文件

### 1. 阿里云 OSS 配置

#### 文件位置：
- `nacos/media-service-dev.yaml`
- `nacos/xuecheng-plus-project/media-service-dev.yaml`
- `nacos/xuecheng-plus-project/message-service-dev.yaml`

#### 需要修改的内容：

```yaml
aliyun:
  oss:
    endpoint: oss-cn-beijing.aliyuncs.com
    accessKeyId: YOUR_ACCESS_KEY_ID_HERE      # ⚠️ 替换为真实的 AccessKey ID
    accessKeySecret: YOUR_ACCESS_KEY_SECRET_HERE  # ⚠️ 替换为真实的 AccessKey Secret
    bucketName: YOUR_BUCKET_NAME_HERE         # ⚠️ 替换为真实的 Bucket 名称
```

#### 如何获取阿里云 OSS 配置：

1. **登录阿里云控制台**：https://www.aliyun.com/
2. **创建 AccessKey**：
   - 进入：控制台 → 个人头像 → AccessKey 管理
   - 创建 AccessKey（建议使用 RAM 用户的 AccessKey，更安全）
   - 记录 `AccessKey ID` 和 `AccessKey Secret`
3. **创建 OSS Bucket**：
   - 进入：产品与服务 → 对象存储 OSS
   - 创建 Bucket
   - 记录 Bucket 名称和 Endpoint

---

### 2. 数据库配置（可选）

如果你的数据库地址、用户名、密码不同，需要修改：

#### 文件位置：
- `nacos/media-service-dev.yaml`
- `nacos/xuecheng-plus-project/*.yaml`
- `xxl-job-2.3.1/xxl-job-admin/src/main/resources/application.properties`

#### 示例：

```yaml
spring:
  datasource:
    url: jdbc:mysql://YOUR_MYSQL_HOST:3306/xuecheng?serverTimezone=UTC
    username: YOUR_USERNAME
    password: YOUR_PASSWORD
```

---

### 3. XXL-JOB Admin 数据库配置

#### 文件：`xxl-job-2.3.1/xxl-job-admin/src/main/resources/application.properties`

```properties
spring.datasource.url=jdbc:mysql://YOUR_MYSQL_HOST:3306/xxl_job?...
spring.datasource.username=YOUR_USERNAME
spring.datasource.password=YOUR_PASSWORD
```

---

## 🛡️ 安全建议

### 1. 不要将真实密钥提交到公开仓库

✅ **推荐做法**：
- 使用环境变量
- 使用配置中心（Nacos）
- 将敏感配置文件加入 `.gitignore`

❌ **避免**：
- 直接在代码中硬编码密钥
- 将真实密钥推送到 GitHub

### 2. 使用 .gitignore 排除敏感文件

已在 `.gitignore` 中配置：

```gitignore
# 敏感配置文件
user.txt
mysql.txt
*.key
*.pem

# 日志文件
logs/
*.log
```

### 3. 使用环境变量（推荐）

在生产环境中，建议使用环境变量：

```yaml
aliyun:
  oss:
    accessKeyId: ${ALIYUN_ACCESS_KEY_ID}
    accessKeySecret: ${ALIYUN_ACCESS_KEY_SECRET}
```

然后在启动时设置环境变量：

```bash
export ALIYUN_ACCESS_KEY_ID=your_real_key_id
export ALIYUN_ACCESS_KEY_SECRET=your_real_key_secret

java -jar your-app.jar
```

---

## 📋 配置检查清单

部署前请确认：

- [ ] 已配置真实的阿里云 OSS AccessKey
- [ ] 已配置真实的数据库连接信息
- [ ] 已配置真实的 Bucket 名称
- [ ] 已验证配置的正确性
- [ ] 敏感配置已排除在版本控制之外

---

## 🔗 相关文档

- 阿里云 OSS 文档：https://help.aliyun.com/product/31815.html
- AccessKey 管理：https://help.aliyun.com/document_detail/53045.html
- XXL-JOB 官方文档：https://www.xuxueli.com/xxl-job/

---

## 📞 遇到问题？

如果在配置过程中遇到问题：

1. 检查配置文件语法是否正确（YAML 缩进）
2. 检查 AccessKey 是否有 OSS 权限
3. 检查 Bucket 是否存在且可访问
4. 检查数据库连接是否正常

---

**最后更新**：2025-10-09  
**重要性**：⭐⭐⭐⭐⭐（必读）

